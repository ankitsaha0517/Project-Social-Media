<%- include("./partials/header.ejs") %>
<div class="w-full min-h-screen bg-zinc-900 text-white py-5">
  <div class="nav flex justify-between items-center px-4">
    <h3 class="text-xl font-semibold"><%=user.username%></h3>
    <div class="icons flex gap-5">
      <a href="/upload"><i class="text-[1.4rem] ri-add-box-line"></i></a>
      <i id="menu-icon" class="text-[1.4rem] ri-menu-line cursor-pointer"></i>
    </div>
  </div>
  <div class="flex justify-between items-center pl-6 pr-[12vw] mt-8">
    <div class="w-[19vw] h-[19vw] bg-sky-100 rounded-full overflow-hidden">
      <img class="w-full h-full object-cover" src="<%=user.avater.url%>" alt="">
    </div>
    <div class="stats flex gap-5 items-center justify-between">
      <div class="flex flex-col items-center justify-center">
        <h3><%=user.posts.length%></h3>
        <h4>Posts</h4>
      </div>
      <div class="flex flex-col items-center justify-center">
        <h3><%=user.followers.length%></h3>
        <h4>Followers</h4>
      </div>
      <div class="flex flex-col items-center justify-center">
        <h3><%=user.following.length%></h3>
        <h4>Following</h4>
      </div>
    </div>
  </div>
  <div class="dets px-6 mt-5">
    <h3 class="text-lg mb-1 font-medium"><%=user.fullname%></h3>
    <p class="text-xs tracking-tight opacity-50"><%=user.bio%></p>
  </div>
  <div class="px-6 mt-5 w-full flex gap-5 items-center text-center">
    <% const foll = user.followers.find((el) => el.toString() === curruser._id.toString()); %>
    <% if (foll) { %>
        <a class="px-4 py-2 bg-zinc-600 text-[0.8rem] font-semibold rounded-md w-[50%]" href="/userprofile/unfollow/<%= user._id %>">Unfollow</a>
    <% } else { %>
        <a class="px-4 py-2 bg-sky-600 text-[0.8rem] font-semibold rounded-md w-[50%]" href="/userprofile/follow/<%= user._id %>">Follow</a>
    <% } %>
    <a class="px-4 py-2 bg-zinc-600 text-[0.8rem] font-semibold rounded-md w-[50%]" href="/follow">Message</a>
  </div>
  <div class="posts w-full flex gap-1 py-2 flex-wrap mt-10">
    <%if(!user.posts.length){%>
      <div class="w-full flex justify-center items-center min-h-[20vh] border-t-[0.1px]">
        <small class="opacity-50">no posts yet.</small>
      </div>
    <%}%>
    <%if(user.posts.length){%>
      <%user.posts.reverse().forEach((post)=>{%>
      <div class="post w-[32.5%] h-32 bg-sky-100 object-cover">
        <a href="/all/posts/<%=user._id%>">
        <img class="w-full h-full object-cover" src="<%=post.img.url%>" alt="">
        </a>
      </div>
      <%})%>
    <%}%>
  </div>
</div>

<!-- Sidebar -->
<!-- <div id="sidebar" class="fixed bottom-0 left-0 w-full h-[70%] bg-zinc-800 text-white transform translate-y-full transition-transform duration-500">
  <div class="flex justify-end p-4">
    <i id="close-icon" class="text-[1.4rem] ri-close-line cursor-pointer"></i>
  </div>
  <div class=" flex flex-col justify-end">
    <h4 class="text-xl font-semibold hover:bg-zinc-700 "><a class="py-2 px-4 text-center" href="/save">Coppy profile Url</a></h4>
    <h4 class="text-xl font-semibold hover:bg-zinc-700 "><a class="py-2 px-4 text-center" href="/logout"><i class="ri-error-warning-line mr-2 font-normal "></i></i>Logout</a></h4>
  </div>
</div> -->

<!-- <script>
  document.getElementById('menu-icon').addEventListener('click', function() {
    document.getElementById('sidebar').classList.remove('translate-y-full');
  });
  document.getElementById('close-icon').addEventListener('click', function() {
    document.getElementById('sidebar').classList.add('translate-y-full');
  });
</script> -->

<%- include("./partials/footer.ejs") %>

